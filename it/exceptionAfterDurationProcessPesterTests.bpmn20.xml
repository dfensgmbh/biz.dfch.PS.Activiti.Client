<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:activiti="http://activiti.org/bpmn"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  targetNamespace="Examples">

  <process id="exceptionAfterDurationProcessPesterTests" name="Create timers process pester tests who throws an exception after duration">
    <documentation>Test process to create a number of timers.</documentation>
    <startEvent id="theStart">
      <extensionElements>
        <activiti:formProperty id="duration" type="long" required="true"/>
      </extensionElements>
    </startEvent>

    <sequenceFlow id="flow1" sourceRef="theStart" targetRef="theEnd" />

    <sequenceFlow id="flow2" sourceRef="theStart" targetRef="timer" />
    
    <scriptTask activiti:async="true" id="timer" name="Execute script" scriptFormat="groovy">
      <script>
        System.out.println("Started...")
        sleep(duration.toLong())
        System.out.println("Ended and throw Exception...")
        throw new java.lang.RuntimeException('Pester tests: exceptionAfterDurationProcessPesterTests throwed an excetion! (This is not an error, just a test. See PS.Activiti.Client/It)');
      </script>
    </scriptTask>

    <sequenceFlow id="flow3" sourceRef="timer" targetRef="theEnd" />

    <endEvent id="theEnd" />

  </process>

</definitions>

